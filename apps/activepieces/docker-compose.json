{
    "services": [
        {
            "name": "activepieces",
            "image": "ghcr.io/activepieces/activepieces:0.73.0",
            "isMain": true,
            "internalPort": 80,
            "addPorts": [
                {
                    "containerPort": 80,
                    "hostPort": 8080
                }
            ],
            "dependsOn": [
                "postgres",
                "redis"
            ],
            "volumes": [
                {
                    "hostPath": "cache",
                    "containerPath": "/usr/src/app/cache"
                }
            ],
            "environment": {
                "AP_ENGINE_EXECUTABLE_PATH": "dist/packages/engine/main.js",
                "AP_API_KEY": "${AP_API_KEY}",
                "AP_ENCRYPTION_KEY": "${AP_ENCRYPTION_KEY}",
                "AP_JWT_SECRET": "${AP_JWT_SECRET}",
                "AP_ENVIRONMENT": "prod",
                "AP_FRONTEND_URL": "http://localhost:8080",
                "AP_WEBHOOK_TIMEOUT_SECONDS": 30,
                "AP_TRIGGER_DEFAULT_POLL_INTERVAL": 5,
                "AP_POSTGRES_DATABASE": "${AP_POSTGRES_DATABASE}",
                "AP_POSTGRES_HOST": "postgres",
                "AP_POSTGRES_PORT": 5432,
                "AP_POSTGRES_USERNAME": "${AP_POSTGRES_USERNAME}",
                "AP_POSTGRES_PASSWORD": "${AP_POSTGRES_PASSWORD}",
                "AP_EXECUTION_MODE": "UNSANDBOXED",
                "AP_REDIS_HOST": "redis",
                "AP_REDIS_PORT": 6379,
                "AP_FLOW_TIMEOUT_SECONDS": 600,
                "AP_TELEMETRY_ENABLED": "true",
                "AP_TEMPLATES_SOURCE_URL": "https://cloud.activepieces.com/api/v1/flow-templates"
            }
        },
        {
            "name": "postgres",
            "image": "postgres:14.4",
            "environment": {
                "POSTGRES_DB": "${AP_POSTGRES_DATABASE}",
                "POSTGRES_USER": "${AP_POSTGRES_USERNAME}",
                "POSTGRES_PASSWORD": "${AP_POSTGRES_PASSWORD}"
            },
            "volumes": [
                {
                    "hostPath": "postgres_data",
                    "containerPath": "/var/lib/postgresql/data"
                }
            ]
        },
        {
            "name": "redis",
            "image": "redis:7.0.7",
            "volumes": [
                {
                    "hostPath": "redis_data",
                    "containerPath": "/data"
                }
            ]
        }
    ]
}